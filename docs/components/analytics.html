<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">

    <title>Analytics - The A/B testing framework for PHP.</title>

    <meta name="description"
          content="PhpAb is a A/B testing framework which can be used to perform multivariate testing.">
    <meta name="keywords" content="ab testing,phpab,multivariate,framework,tests,test">
    <meta name="application-name" content="PhpAb">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
          integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <link rel="stylesheet" href="http://phpab.github.io/css/website.css">

    <link rel="icon" href="http://phpab.github.io/favicon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" href="http://phpab.github.io/favicon.ico" type="image/x-icon"/>

    <script src="https://code.jquery.com/jquery-2.2.3.min.js"
            integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
            integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>

    <script>
        $(function () {
            hljs.initHighlightingOnLoad();
        });
    </script>

    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-76115045-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="//www.google-analytics.com/cx/api.js"></script>
    <script>ga('set', 'VCq5cVWGS3mbuUyCXmUN2w', 0);</script>
</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://phpab.github.io/"><strong>PhpAb</strong></a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://phpab.github.io/docs/index.html">Documentation</a></li>
                <li><a class="github" href="https://github.com/phpab/phpab"><i class="fa fa-github"></i></a></li>
            </ul>
        </div>
    </div>
</nav>


    <div class="container">
        <div class="row">
            <div class="col-md-3 documentation-menu">
                                    <strong>Introduction</strong>

                    <ul>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/getting-started.html">
                                    Getting started
                                </a>
                            </li>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/library-layout.html">
                                    Library layout
                                </a>
                            </li>
                                            </ul>
                                    <strong>Components</strong>

                    <ul>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/components/analytics.html">
                                    Analytics
                                </a>
                            </li>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/components/events.html">
                                    Events
                                </a>
                            </li>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/components/participation.html">
                                    Participation
                                </a>
                            </li>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/components/storage.html">
                                    Storage
                                </a>
                            </li>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/components/variants.html">
                                    Variants
                                </a>
                            </li>
                                            </ul>
                                    <strong>Frameworks Integrations</strong>

                    <ul>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/frameworks/symfony2.html">
                                    Symfony 2
                                </a>
                            </li>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/frameworks/wordpress.html">
                                    Wordpress
                                </a>
                            </li>
                                                    <li role="presentation" class="">
                                <a href="http://phpab.github.io/docs/frameworks/zf2.html">
                                    Zend Framework 2
                                </a>
                            </li>
                                            </ul>
                            </div>
            <div class="col-md-9">
                <article>
                    <div class="pull-right">
                        <a href="https://github.com/phpab/phpab.github.io/blob/source/source/docs/components/analytics.md"
                           class="btn btn-default btn-sm">
                            Edit this page on GitHub
                            <i class="fa fa-github"></i>
                        </a>
                    </div>

                    <h1 id="analytics">Analytics</h1>
<p>In order to determine how your tests are doing, you will need to store tests user participation somewhere.
What you are usually storing is:</p>
<ul>
<li>a user identifier</li>
<li>a test identifier</li>
<li>a variant identifier (this could be control too)</li>
<li>a scenario (typically a web url)</li>
<li>a timestamp</li>
</ul>
<p>By analyzing all this data, you can determine which variant is performing better and which one gets users closer to your goals.</p>
<p>PhpAb provides different ways to store this data.
You can use more than one Analytics implementation simultaneously too. For instance, you might want to to use Google Analytics and MongoDB, so you could also create your own business intelligence data crunching.</p>
<h2 id="google-analytics">Google Analytics</h2>
<p>Google Analytics (GA) is a a very powerful tool that can combine website usage with A/B tests (in GA called &quot;Experiments&quot;). Read about <a href="google-analytics-experiments/index.html">how to use Google Analytics Experiments</a> to run your tests.</p>
<p><strong>Classic or Universal Analytics?</strong> It's important that you know which version of Google Analytics your site is using else your data will not be saved.</p>
<h3 id="google-classic-analytics">Google Classic Analytics</h3>
<p>Use:</p>
<ul>
<li><code>PhpAb\Analytics\DataCollector\Google</code> to store user test participations</li>
<li><code>PhpAb\Analytics\Renderer\Google\GoogleClassicAnalytics</code> to render in your page the JavaScript required by Google to track participation.</li>
</ul>
<pre><code class="language-php">// This illustrates a test with:
// * Cookie storage
// * Random Variant Chooser
// * Simple variants
// * Google Classic Analytics

use PhpAb\Storage\Cookie;
use PhpAb\Participation\Manager;
use PhpAb\Analytics\DataCollector\Google;
use PhpAb\Event\Dispatcher;
use PhpAb\Participation\Filter\Percentage;
use PhpAb\Variant\Chooser\RandomChooser;
use PhpAb\Engine\Engine;
use PhpAb\Variant\SimpleVariant;
use PhpAb\Test\Test;
use PhpAb\Analytics\Renderer\Google\GoogleClassicAnalytics;

$storage = new Cookie('phpab');
$manager = new Manager($storage);

$analyticsData = new Google();

$dispatcher = new Dispatcher();
$dispatcher-&gt;addSubscriber($analyticsData);

$filter = new Percentage(100);
$chooser = new RandomChooser();

$engine = new Engine($manager, $dispatcher, $filter, $chooser);

$test = new Test(
    'buttonColour',
    [],
    [Google::EXPERIMENT_ID =&gt; 'ABC123']
);

$test-&gt;addVariant(new SimpleVariant('control'));
$test-&gt;addVariant(new SimpleVariant('variant'));

$engine-&gt;addTest($test);
$engine-&gt;start();

$analytics = new GoogleClassicAnalytics($analyticsData-&gt;getTestsData());

// In your views run
// echo $analytics-&gt;getScript()
</code></pre>
<h3 id="google-universal-analytics">Google Universal Analytics</h3>
<p>Use:</p>
<ul>
<li><code>PhpAb\Analytics\DataCollector\Google</code> to store user test participations</li>
<li><code>PhpAb\Analytics\Renderer\Google\GoogleUniversalAnalytics</code> to render in your page the JavaScript required by Google to track participation.</li>
</ul>
<pre><code class="language-php">// This illustrates a test with:
// * Cookie storage
// * Random Variant Chooser
// * Simple variants
// * Google Universal Analytics

use PhpAb\Storage\Cookie;
use PhpAb\Participation\Manager;
use PhpAb\Analytics\DataCollector\Google;
use PhpAb\Event\Dispatcher;
use PhpAb\Participation\Filter\Percentage;
use PhpAb\Variant\Chooser\RandomChooser;
use PhpAb\Engine\Engine;
use PhpAb\Variant\SimpleVariant;
use PhpAb\Test\Test;
use PhpAb\Analytics\Renderer\Google\GoogleUniversalAnalytics;

$storage = new Cookie('phpab');
$manager = new Manager($storage);

$analyticsData = new Google();

$dispatcher = new Dispatcher();
$dispatcher-&gt;addSubscriber($analyticsData);

$filter = new Percentage(100);
$chooser = new RandomChooser();

$engine = new Engine($manager, $dispatcher, $filter, $chooser);

$test = new Test(
    'buttonColour',
    [],
    [Google::EXPERIMENT_ID =&gt; 'ABC123']
);

$test-&gt;addVariant(new SimpleVariant('control'));
$test-&gt;addVariant(new SimpleVariant('variant'));

$engine-&gt;addTest($test);
$engine-&gt;start();

$analytics = new GoogleUniversalAnalytics($analyticsData-&gt;getTestsData());

// In your views run
// echo $analytics-&gt;getScript()</code></pre>
<h2 id="pdo">PDO</h2>
<p>PDO is a Database Abstraction Layer (DBAL) and, as such, allows you to interact with different database services using the same api.
To store PhpAb test participations using PDO you must:</p>
<h3 id="install-module">Install module</h3>
<p>Due to its requirements, PDO Analytics is shipped as a separate library.
Install it via composer with:</p>
<pre><code class="language-bash">$ composer require phpab/analytics-pdo</code></pre>
<p><strong>Note:</strong> Make sure you have installed the database driver you intend to use.</p>
<h3 id="usage">Usage</h3>
<p>This example uses <code>Sqlite</code> as storage service.</p>
<pre><code class="language-php">
use PhpAb\Storage\Cookie;
use PhpAb\Participation\Manager;
use PhpAb\Analytics\DataCollector\Generic;
use PhpAb\Event\Dispatcher;
use PhpAb\Participation\Filter\Percentage;
use PhpAb\Variant\Chooser\RandomChooser;
use PhpAb\Engine\Engine;
use PhpAb\Test\Test;
use PhpAb\Variant\SimpleVariant;
use PhpAb\Variant\CallbackVariant;

$storage = new Cookie('phpab');
$manager = new Manager($storage);

$analyticsData = new Generic();

$dispatcher = new Dispatcher();
$dispatcher-&gt;addSubscriber($analyticsData);

$filter = new Percentage(50);
$chooser = new RandomChooser();

$engine = new Engine($manager, $dispatcher, $filter, $chooser);

$test = new Test('foo_test');
$test-&gt;addVariant(new SimpleVariant('_control'));
$test-&gt;addVariant(new CallbackVariant('v1', function () {
    echo 'v1';
}));
$test-&gt;addVariant(new CallbackVariant('v2', function () {
    echo 'v2';
}));
$test-&gt;addVariant(new CallbackVariant('v3', function () {
    echo 'v3';
}));

// Add some tests
$engine-&gt;addTest($test);

$engine-&gt;start();

// Here starts PDO interaction
$pdo = new PDO('sqlite:./phpab.db');

$options = [
    'runTable' =&gt; 'Run',
    'testIdentifierField' =&gt; 'testIdentifier',
    'variantIdentifierField' =&gt; 'variantIdentifier',
    'userIdentifierField' =&gt; 'userIdentifier',
    'scenarioIdentifierField' =&gt; 'scenarioIdentifier',
    'runIdentifierField' =&gt; 'runIdentifier',
    'createdAtField' =&gt; 'createdAt'
];

// Inject PDO instance together with Analytics Data
$analytics = new \PhpAb\Analytics\PDO(
    $analyticsData-&gt;getTestsData(),
    $pdo,
    $options
);

// Store it providing a user identifier and a scenario
// typically a URL or a controller name

$analytics-&gt;store('1.2.3.4-abc', 'homepage.php');</code></pre>
<p>The class <code>\PhpAb\Analytics\PDO</code> expects 3 parameters:</p>
<ul>
<li>The the participation data array</li>
<li>The PDO instance</li>
<li>The table and fialds definition (optional)</li>
</ul>
<p>Once these parameters are passed, execute the <code>store($userIdentifier, $scenarioIdentifier)</code> passing two parameters:</p>
<ul>
<li>User identifier, a string that will represent a website visitor. Usually these are stored in a cookie.</li>
<li>Scenario identifier, this is typically a url, either a complete one, or a normalized one.</li>
</ul>
<p>Note: You can check the code and examples at <a href="https://github.com/phpab/analytics-pdo">Analytics-PDO</a>.</p>
<h2 id="mongodb">MongoDB</h2>
<p>To store PhpAb test participations using <code>MongoDB</code> you must:</p>
<h3 id="install-module-1">Install module</h3>
<p>Due to its requirements, MongoDB Analytics is shipped as a separate library.
Install it via composer with:</p>
<pre><code class="language-bash">$ composer require phpab/analytics-mongodb</code></pre>
<h3 id="usage-1">Usage</h3>
<pre><code class="language-php">use PhpAb\Storage\Cookie;
use PhpAb\Participation\Manager;
use PhpAb\Analytics\DataCollector\Generic;
use PhpAb\Event\Dispatcher;
use PhpAb\Participation\Filter\Percentage;
use PhpAb\Variant\Chooser\RandomChooser;
use PhpAb\Variant\SimpleVariant;
use PhpAb\Variant\CallbackVariant;
use PhpAb\Engine\Engine;
use PhpAb\Test\Test;

$storage = new Cookie('phpab');
$manager = new Manager($storage);

$analyticsData = new Generic();

$dispatcher = new Dispatcher();
$dispatcher-&gt;addSubscriber($analyticsData);

$filter = new Percentage(50);
$chooser = new RandomChooser();

$engine = new Engine($manager, $dispatcher, $filter, $chooser);

$test = new Test('foo_test');
$test-&gt;addVariant(new SimpleVariant('_control'));
$test-&gt;addVariant(new CallbackVariant('v1', function () {
    echo 'v1';
}));
$test-&gt;addVariant(new CallbackVariant('v2', function () {
    echo 'v2';
}));
$test-&gt;addVariant(new CallbackVariant('v3', function () {
    echo 'v3';
}));

// Add some tests
$engine-&gt;addTest($test);

$engine-&gt;start();

// Here starts MongoDB interaction

// Provide a MongoDB Collection to be injected
$mongoCollection = (new \MongoDB\Client)-&gt;phpab-&gt;run;

// Inject together with Analytics Data
$analytics = new \PhpAb\Analytics\MongoDB(
        $analyticsData-&gt;getTestsData(), $mongoCollection
);

// Store it providing a user identifier and a scenario
// typically a URL or a controller name

$result = $analytics-&gt;store('1.2.3.4-abc', 'homepage.php');</code></pre>
<p>The class <code>\PhpAb\Analytics\MongoDB</code> expects 2 parameters:</p>
<ul>
<li>The the participation data array</li>
<li>The <code>MongoDB</code> collection name where participation will be stored</li>
</ul>
<p>Once these parameters are passed, execute the <code>store($userIdentifier, $scenarioIdentifier)</code> passing two parameters:</p>
<ul>
<li>User identifier, a string that will represent a website visitor. Usually these are stored in a cookie.</li>
<li>Scenario identifier, this is typically a url, either a complete one, or a normalized one.</li>
</ul>
<p>Note: You can check the code and examples at <a href="https://github.com/phpab/analytics-mongodb">Analytics-MongoDB</a>.</p>
                </article>
            </div>
        </div>
    </div>


<footer>
    <div class="container">
        <p>
            For questions, bugs or if you want to let us know how much you appreciate this library,
            please <a href="https://github.com/phpab/phpab/issues/new">create an issue</a>
            or chat with us on <a href="https://gitter.im/phpab">Gitter</a>.
        </p>
        <p>
        </p>
        <p>
            Created by
            <a href="http://waltertamboer.nl/">Walter Tamboer</a>,
            <a href="https://github.com/pachico">Mariano Benítez Mulet</a>,
            <a href="https://github.com/psren">Patrick Heller</a>
            and all <a href="https://github.com/phpab/phpab/graphs/contributors">contributors</a>
        </p>
        <p>
            Website generated with <a href="http://couscous.io">Couscous</a> | Design is heavily inspired by
            <a href="http://php-di.org">PHP-DI</a>
        </p>
        <p style="margin-top: 25px;">
            <a href="https://packagist.org/packages/phpab/phpab"><img src="https://img.shields.io/packagist/v/phpab/phpab.svg?style=flat-square" style="max-width:100%;"></a>
            <a href="https://github.com/phpab/phpab/blob/master/LICENSE.md"><img src="https://img.shields.io/badge/license-MIT-brightgreen.svg?style=flat-square" style="max-width:100%;"></a>
            <a href="https://travis-ci.org/phpab/phpab"><img src="https://img.shields.io/travis/phpab/phpab/master.svg?style=flat-square" style="max-width:100%;"></a>
            <a href="https://scrutinizer-ci.com/g/phpab/phpab/code-structure"><img src="https://img.shields.io/scrutinizer/coverage/g/phpab/phpab.svg?style=flat-square" style="max-width:100%;"></a>
            <a href="https://scrutinizer-ci.com/g/phpab/phpab"><img src="https://img.shields.io/scrutinizer/g/phpab/phpab.svg?style=flat-square" style="max-width:100%;"></a>
            <a href="https://packagist.org/packages/phpab/phpab"><img src="https://img.shields.io/packagist/dt/phpab/phpab.svg?style=flat-square" style="max-width:100%;"></a></p>
    </div>
</footer>

<script>
    ((window.gitter = {}).chat = {}).options = {
        room: 'phpab'
    };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

</body>
</html>
