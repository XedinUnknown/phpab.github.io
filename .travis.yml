language: php

php:
- hhvm

sudo: false

branches:
  only:
  - source

before_install:
- openssl aes-256-cbc -K $encrypted_d3ec3c12d2f5_key -iv $encrypted_d3ec3c12d2f5_iv
  -in .travis/phpab.github.io.enc -out ~\/.ssh/phpab.github.io -d
- echo -e "Host github.com\n\tIdentityFile ~/.ssh/phpab.github.io\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
- travis_retry composer self-update
- travis_retry gem install sass

install:
- travis_retry curl -O https://download.sculpin.io/sculpin.phar
- travis_retry php sculpin.phar install

script:
- php sculpin.phar generate --env=prod

after_script:
- bin/publish.sh

notifications:
  email: false
  irc: irc.freenode.org#phpab
